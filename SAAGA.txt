1. Flask-sovelluksen muutokset:
Päivitetään Flaskin reitit niin, että voidaan valita pelin ID ja hakea siihen liittyviä kysymyksiä.

from flask import Flask, render_template, jsonify, request
from database import get_random_question  # Oletetaan, että tämä funktio on yleinen ja kykenee käsittelemään eri pelejä

app = Flask(__name__)

# Pääsivun reitti
@app.route('/')
def index():
    return render_template('index.html')  # Tämä viittaa HTML-tiedostoon

@app.route('/peli/<int:pelin_id>')  # Pelin ID voidaan välittää URL:ssä
def peli(pelin_id):
    # Tässä pelin_id voidaan käyttää hakemaan pelin tiedot tietokannasta
    return render_template('peli.html', pelin_id=pelin_id)

# Reitti tehtävien hakemiseen tietokannasta, pelin ID mukaan
@app.route('/new_question/<int:pelin_id>', methods=['GET'])
def new_question(pelin_id):
    question_data = get_random_question(pelin_id)  # Muokataan funktio hakemaan pelin mukaan
    return jsonify(question_data)

# Vastauksen tarkistus
@app.route('/check_answer', methods=['POST'])
def check_answer():
    data = request.get_json()
    user_answer = data['user_answer']
    correct_answer = data['correct_answer']
    
    # Tarkistetaan vastaus (olettaen että vastaus on oikein jos se täsmää)
    is_correct = str(user_answer) == str(correct_answer)
    
    return jsonify({"correct": is_correct})

if __name__ == '__main__':
    app.run(debug=True)

2. HTML-puolen muutokset:
HTML:ssä voidaan hallita useita pelejä yhdellä sivulla. Voimme tehdä sen niin, että peli valitaan parametrilla (kuten pelin_id), ja JavaScript huolehtii siitä, että peliin liittyvät kysymykset haetaan ja niihin vastataan.

<!DOCTYPE html>
<html lang="fi">
<head>
    <meta charset="UTF-8">
    <title>Peli</title>
    <link rel="stylesheet" href="static/peli1.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
    <div class="mathematics-section">
        <header class="header">
            <h1 class="subject-title">Matematiikka</h1>
            <button class="icon-button" aria-label="Menu">
                <img loading="lazy" src="https://cdn.builder.io/api/v1/image/assets/TEMP/4fe30ddc3b898acf88f46ad779a7295745ba4d35ef0a4a6ccabf35735c61a035?placeholderIfAbsent=true&apiKey=d4a6829ab0a243af995c418502f3ed93"
                    class="icon-image" alt="Avatar" />
            </button>
        </header>
        <main class="content-area">
            <section class="main-content">
                <button class="small-icon-button" aria-label="Action" onclick="location.href='index.html'">
                    <img loading="lazy" src="https://cdn.builder.io/api/v1/image/assets/TEMP/ac24ec8f1f19b53f03cb818be4b1973dda8fad9cfa23067bf47b00d7fa6658ab?placeholderIfAbsent=true&apiKey=d4a6829ab0a243af995c418502f3ed93"
                        class="icon-image" alt="Takaisin" />
                </button>
                <div class="main-display" role="img" aria-label="Main content display">
                    <div class="question-box" id="question-box">Ladataan kysymys...</div>
                    <span>=</span>
                    <input type="number" id="answer-box" placeholder="Syötä vastaus">
                    <button onclick="checkAnswer()">Vastaa</button>
                </div>
            </section>
        </main>
    </div>

    <script>
        const pelinId = window.location.pathname.split('/')[2]; // Haetaan URL:stä pelin ID

        // Hakee uuden kysymyksen palvelimelta ja päivittää sen sivulle
        async function fetchQuestion() {
            const response = await fetch(`/new_question/${pelinId}`);
            const data = await response.json();
            document.getElementById("question-box").innerText = data.question;
            document.getElementById("question-box").dataset.answer = data.answer;
        }

        // Tarkistaa käyttäjän vastauksen ja näyttää oikean/väärän ilmoituksen
        async function checkAnswer() {
            const userAnswer = document.getElementById("answer-box").value;
            const correctAnswer = document.getElementById("question-box").dataset.answer;
            
            // Lähetetään vastaus tarkistettavaksi
            const response = await fetch("/check_answer", {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    user_answer: userAnswer,
                    correct_answer: correctAnswer
                })
            });

            const result = await response.json();
            if (result.correct) {
                alert('Oikein!');
            } else {
                alert('Väärin, yritä uudelleen.');
            }

            fetchQuestion(); // Hakee seuraavan tehtävän
        }

        document.addEventListener("DOMContentLoaded", fetchQuestion); // Hakee tehtävän heti sivun latautuessa
    </script>
</body>
</html>

Flask-puolella: Voit käsitellä useita pelejä yhdellä reitillä (/peli/<pelin_id>), jolloin pelin tunnisteen perusteella haetaan oikeat kysymykset ja pelilogiikka.
HTML/JavaScript-puolella: Yksi HTML-sivu voi hallita useita pelejä. JavaScript hakee kysymyksen ja tarkistaa vastauksen dynaamisesti pelin ID:n mukaan.


