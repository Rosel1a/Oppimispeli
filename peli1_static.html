<!-- TÄN TIEDOSTON PYSTYY AJAA SELAIMESSA -->
<!DOCTYPE html>
<html lang="fi">
<head>
    <meta charset="UTF-8">
    <title>Peli 1</title>
    <!-- Ulkoinen CSS-tiedosto -->
    <link rel="stylesheet" href="static/peli1.css"> 
    <!-- Viewportin määrittely -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
    <div class="mathematics-section">
        <!-- Sivun yläosa, jossa on otsikko ja avatar -->
        <header class="header">
          <h1 class="subject-title">Matematiikka</h1>
            <button class="icon-button" aria-label="Menu">
                <img
                    loading="lazy"
                    src="https://cdn.builder.io/api/v1/image/assets/TEMP/4fe30ddc3b898acf88f46ad779a7295745ba4d35ef0a4a6ccabf35735c61a035?placeholderIfAbsent=true&apiKey=d4a6829ab0a243af995c418502f3ed93"
                    class="icon-image"
                    alt="Avatar"
                />
            </button>
        </header>
        <!-- Pääsisältöalue, jossa on kysymys ja vastauskenttä -->
        <main class="content-area">
          <section class="main-content">
            <!-- Takaisin-painike -->
            <button class="small-icon-button" aria-label="Action" onclick="location.href='index.html'">
              <img
                  loading="lazy"
                  src="https://cdn.builder.io/api/v1/image/assets/TEMP/ac24ec8f1f19b53f03cb818be4b1973dda8fad9cfa23067bf47b00d7fa6658ab?placeholderIfAbsent=true&apiKey=d4a6829ab0a243af995c418502f3ed93"
                  class="icon-image"
                  alt="Takaisin"
              />
          </button>
            <div class="main-display" role="img" aria-label="Main content display">
              <!-- Pelin rakenne -->
                  <div class="question-box" id="question-box">1 × 1</div>
                  <span>=</span>
                  <input type="number" id="answer-box" placeholder="Syötä vastaus">
                  <button onclick="checkAnswer()">Vastaa</button>
              </div>
              
              <!-- Sivupalkki lisätiedolle -->
              <aside class="sidebar-column">
                  <div class="sidebar-content">
                <div class="sidebar-inner" role="complementary" aria-label="Sidebar content"></div>
                  </div>
              </aside>
          </section>
      </main>
      </div>

      <script>
        // Hakee uuden kysymyksen palvelimelta ja päivittää sen sivulle
        async function fetchQuestion() {
          const response = await fetch("http://127.0.0.1:5000/new_question");
          const data = await response.json();
          document.getElementById("question-box").innerText = data.question;
          document.getElementById("question-box").dataset.answer = data.answer;
        }
        // Tarkistaa käyttäjän vastauksen ja näyttää oikean/väärän ilmoituksen
        async function checkAnswer() {
          const userAnswer = document.getElementById("answer-box").value;
          const correctAnswer = document.getElementById("question-box").dataset.answer;
          if (userAnswer === correctAnswer) {
            alert('Oikein!');
          } else {
            alert('Väärin, yritä uudelleen.');
          }
          fetchQuestion(); // Hakee seuraavan tehtävän
        }
        document.addEventListener("DOMContentLoaded", fetchQuestion); // Hakee tehtävän heti sivun latautuessa
      </script>
  </body>
</html>